<div class="container-fluid py-4">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h3 class="mb-0">
        <i class="fas fa-users me-2 text-primary"></i>
        Groups Management
      </h3>
      <button 
        class="btn btn-primary"
        [routerLink]="['/add-group']"
        *ngIf="user?.role === 'Admin' || user?.role === 'MANAGER'"
      >
        <i class="fas fa-plus me-2"></i>Create Group
      </button>
    </div>
    
    <div class="card-body">
      <!-- Loading State -->
      <div *ngIf="loading" class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2">Loading groups...</p>
      </div>

      <!-- Empty State -->
      <div *ngIf="!loading && !groupsData.length" class="text-center py-5">
        <div class="empty-state">
          <i class="fas fa-inbox fa-3x text-muted mb-3"></i>
          <h4>No Groups Found</h4>
          <p class="text-muted">There are no groups available at the moment.</p>
          <button 
            *ngIf="user?.role === 'ADMIN' || user?.role === 'MANAGER'"
            class="btn btn-primary"
            [routerLink]="['/groups/new']"
          >
            <i class="fas fa-plus me-2"></i>Create Your First Group
          </button>
        </div>
      </div>

      <!-- Groups Table -->
      <div *ngIf="!loading && groupsData.length" class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th scope="col" class="text-center" style="width: 60px;">#</th>
              <th scope="col">Group Name</th>
              <th scope="col">Ownership Type</th>
              <th scope="col">Created Date</th>
              <th scope="col" class="text-center">Status</th>
              <th scope="col" class="text-end" style="width: 150px;">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let group of groupsData; let i = index">
              <td class="text-center fw-semibold">{{ i + 1 }}</td>
              <td>
                <div class="d-flex align-items-center">
                  <div class="avatar-sm me-2">
                    <div class="avatar-title bg-soft-primary text-primary rounded-circle">
                      <i class="fas fa-users"></i>
                    </div>
                  </div>
                  <div>
                    <h6 class="mb-0">{{ group.name || 'â€”' }}</h6>
                  </div>
                </div>
              </td>
              <td>
                <span class="badge bg-soft-info text-uppercase">
                  {{ group.ownershipType || '-' }}
                </span>
              </td>
              <td>{{ group.createdAt | date:'mediumDate' }}</td>
              <td class="text-center">
                <span 
                  class="badge" 
                  [ngClass]="group.active ? 'bg-soft-success text-success' : 'bg-soft-danger text-danger'"
                >
                  {{ group.active ? 'ACTIVE' : 'INACTIVE' }}
                </span>
              </td>
              <td class="text-end">
                <div class="btn-group" role="group">
                  <button 
                    type="button" 
                    class="btn btn-sm btn-outline-primary"
                    [routerLink]="['/update-group', group.uid]"
                  >
                    <i class="fas fa-pencil me-1"></i> Edit
                  </button>
                  <button 
                    *ngIf="user?.role === 'ADMIN'"
                    type="button" 
                    class="btn btn-sm btn-outline-secondary"
                    [routerLink]="['/groups/edit', group.uid]"
                  >
                    <i class="fas fa-edit"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    
    <!-- Pagination -->
    <div class="card-footer d-flex justify-content-between align-items-center" *ngIf="groupsData.length > 0">
      <div class="text-muted">
        Showing <strong>{{ groupsData.length }}</strong> of <strong>{{ groupsData.length }}</strong> groups
      </div>
      <nav>
        <ul class="pagination pagination-sm mb-0">
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Previous</a>
          </li>
          <li class="page-item active"><a class="page-link" href="#">1</a></li>
          <li class="page-item">
            <a class="page-link" href="#">Next</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>